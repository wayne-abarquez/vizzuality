<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%" xmlns:view="org.vizzuality.view.*"
	addedToStage="initSWFAddress()"
    removedFromStage="destroySWFAddress()"
    currentStateChange="setSWFAddress()"	
	 currentState="Africa">
	<mx:Script>
		<![CDATA[
			import com.asual.swfaddress.SWFAddress;
			import com.asual.swfaddress.SWFAddressEvent;
		
			public var path:String="rec/checkout/countries";
            public var depth:int=3;	
		
		
			private function initSWFAddress():void {
                handleSWFAddress(new SWFAddressEvent(SWFAddressEvent.CHANGE));
                SWFAddress.addEventListener(SWFAddressEvent.CHANGE, handleSWFAddress);
            }
            
            private function destroySWFAddress():void {
                SWFAddress.removeEventListener(SWFAddressEvent.CHANGE, handleSWFAddress);
            }
            
            private function setSWFAddress():void {
                Helper.setSWFAddress(this, path, depth);
            }
            
            private function handleSWFAddress(event:SWFAddressEvent):void {
                if (event.pathNames.length >= depth && event.pathNames[depth - 1] == path) {
                    Helper.handleSWFAddress(this, event, depth);
                }
            }	
		]]>
	</mx:Script>

    <mx:states>
        <mx:State name="Africa">
            <mx:SetProperty target="{button3}" name="selected" value="true"/>
            <mx:SetProperty target="{countryList}" name="continentId" value="1"/>
            <mx:SetProperty target="{countryList}" name="height"/>
        </mx:State>
        <mx:State name="Asia">
            <mx:SetProperty target="{button4}" name="selected" value="true"/>
            <mx:SetProperty target="{countryList}" name="continentId" value="2"/>
        </mx:State>
        <mx:State name="Europe">
            <mx:SetProperty target="{button6}" name="selected" value="true"/>
            <mx:SetProperty target="{countryList}" name="continentId" value="3"/>
        </mx:State>
        <mx:State name="Namerica">
            <mx:SetProperty target="{button5}" name="selected" value="true"/>
            <mx:SetProperty target="{countryList}" name="continentId" value="4"/>
        </mx:State>
        <mx:State name="Samerica">
            <mx:SetProperty target="{button7}" name="selected" value="true"/>
            <mx:SetProperty target="{countryList}" name="continentId" value="5"/>
        </mx:State>
        <mx:State name="Oceania">
            <mx:SetProperty target="{button8}" name="selected" value="true"/>
            <mx:SetProperty target="{countryList}" name="continentId" value="6"/>
        </mx:State>
    </mx:states>
    <mx:VBox width="100%" height="100%">    	
	    <mx:Canvas backgroundColor="#e1efff" width="100%">
			<mx:Label text="Select one or more countries from the list below"  fontFamily="Helvetica" fontStyle="normal" fontSize="12" fontWeight="bold" color="#666666" width="264" left="10" top="10" id="label1"/>
	    	<mx:HBox top="34" left="10" id="hbox1" horizontalGap="3">
		        <mx:Button label="Africa"
		    		click="currentState='Africa'"  id="button3" styleName="subMenuButton" fontSize="13" paddingTop="4" paddingBottom="0" height="27" fontWeight="bold" selected="false"/>
		        <mx:Button label="Asia"
		    		click="currentState='Asia'" id="button4" styleName="subMenuButton" fontSize="13" paddingTop="4" paddingBottom="0" height="27" fontWeight="bold" selected="false"/>
		    	<mx:Button label="Europe"
		    		click="currentState='Europe'"  id="button6" styleName="subMenuButton" fontSize="13" paddingTop="4" paddingBottom="0" height="27" fontWeight="bold" selected="false"/>
		        <mx:Button label="N.America"
		    		click="currentState='Namerica'"  id="button5" styleName="subMenuButton" fontSize="13" paddingTop="4" paddingBottom="0" height="27" fontWeight="bold" selected="false"/>
		    	<mx:Button label="S.America"
		    		click="currentState='Samerica'"  id="button7" styleName="subMenuButton" fontSize="13" paddingTop="4" paddingBottom="0" height="27" fontWeight="bold" selected="false"/>
		        <mx:Button label="Oceania"
		    		click="currentState='Oceania'"  id="button8" styleName="subMenuButton" fontSize="13" paddingTop="4" paddingBottom="0" height="27" fontWeight="bold" selected="false"/>
		    </mx:HBox>
		</mx:Canvas>
	    
    	<view:CountryList id="countryList" continentId="1"  width="100%" height="100%"/>
<!--	    <mx:ViewStack id="continents" width="100%" height="100%">
	    	<view:CountryList continentId="2"  width="100%" height="100%"/>
	    	<view:CountryList continentId="3"  width="100%" height="100%"/>
	    	<view:CountryList continentId="4"  width="100%" height="100%"/>
	    	<view:CountryList continentId="5"  width="100%" height="100%"/>
	    	<view:CountryList continentId="6"  width="100%" height="100%"/>
	    	
	    </mx:ViewStack>-->
    </mx:VBox>
</mx:Canvas>
