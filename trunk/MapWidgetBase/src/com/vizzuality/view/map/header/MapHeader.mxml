<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" styleName="topToolbar" backgroundSize="100%" 
	width="100%" height="29" currentState="{AppStates.gi().topState}">
	<mx:states>
		<mx:State name="{AppStates.WORLD}">
			<!--<mx:RemoveChild target="{button0}"/>-->
		</mx:State>
		<mx:State name="{AppStates.COUNTRIES}">
			<mx:RemoveChild target="{button2}"/>
			<mx:RemoveChild target="{button1}"/>
		</mx:State>
		<mx:State name="{AppStates.COUNTRY}"></mx:State>
		<mx:State name="{AppStates.PA}"></mx:State>
	</mx:states>
<mx:Script>
	<![CDATA[
		import mx.core.Application;
		import com.google.maps.interfaces.IMapType;
		import com.vizzuality.view.AppStates;
		import asual.SWFAddress;
		import com.google.maps.MapType;
		import com.vizzuality.view.map.MapCanvas;
		import com.google.maps.Map;
		
		private var lastSelected:Button;
		
		public var map:Map;
		
		private function changeMapType(m:IMapType,e:Event):void{
			if(lastSelected){
				lastSelected.enabled =true;
			}
			map.setMapType(m);
			lastSelected = e.currentTarget as Button;
			lastSelected.enabled = false;
		}
		
		private function changeToCountries(e:Event):void{
			if(lastSelected){
				lastSelected.enabled =true;
			}
			lastSelected = e.currentTarget as Button;
			lastSelected.enabled = false;
			AppStates.gi().setAllStates(AppStates.COUNTRIES,'');
		}
		
		private function onZoomSliderChange():void {
			map.setZoom(zoomSlider.value);
		}
		private function zoomIn():void {
			map.setZoom(map.getZoom()+1);
		}
		private function zoomOut():void {
			map.setZoom(map.getZoom()-1);
		}
	]]>
</mx:Script>
	<mx:HBox left="10" verticalCenter="0" verticalAlign="middle" horizontalGap="1" backgroundColor="#FFFFFF" cornerRadius="6" width="229.5" height="27" horizontalAlign="center" borderStyle="solid" borderColor="#94B6D2">
		<mx:Button label="-" width="21" click="zoomOut()" height="16"/>
		<mx:HSlider id="zoomSlider" minimum="0" maximum="16" snapInterval="1" liveDragging="true" styleName="zoomSlider" change="onZoomSliderChange()"/>
		<mx:Button label="+" width="21" click="zoomIn()" height="16"/>
	</mx:HBox>
	<mx:HBox left="247" verticalCenter="0" styleName="darkTopContainer" backgroundSize="100%" 
		paddingTop="3" paddingBottom="3" paddingRight="3" height="21" horizontalGap="1">
		<mx:Button label="terrain" click="changeMapType(MapType.PHYSICAL_MAP_TYPE,event)" styleName="btnViewType" height="15"
			mouseChildren="false" useHandCursor="true" buttonMode="true"/>
		<mx:Image source="@Embed(source='/com/vizzuality/style/skin/ui.swf',symbol='dark_top_container_separator')" scaleContent="true" height="18"/>
		<mx:Button label="satellite" click="changeMapType(MapType.SATELLITE_MAP_TYPE,event)" styleName="btnViewType" height="15"
			mouseChildren="false" useHandCursor="true" buttonMode="true"/>
		<mx:Image source="@Embed(source='/com/vizzuality/style/skin/ui.swf',symbol='dark_top_container_separator')" scaleContent="true" height="18"/>
		<mx:Button label="map" click="changeMapType(MapType.NORMAL_MAP_TYPE,event)" styleName="btnViewType" height="15"
			mouseChildren="false" useHandCursor="true" buttonMode="true"/>
		<mx:Image source="@Embed(source='/com/vizzuality/style/skin/ui.swf',symbol='dark_top_container_separator')" scaleContent="true" height="18"/>
		<mx:Button label="countries" click="changeToCountries(event)" id="button1" styleName="btnViewType" height="15"
			mouseChildren="false" useHandCursor="true" buttonMode="true"/>
		<!--<mx:Button label="world" click="AppStates.gi().setAllStates(AppStates.WORLD,'')" id="button0"/>-->
	</mx:HBox>
	<mx:HBox right="10" verticalCenter="1" horizontalGap="2">
		<mx:Button label="search" click="AppStates.gi().setSecondState(AppStates.SEARCH)" styleName="btnTool"
			height="23" buttonMode="true" useHandCursor="true" mouseChildren="false"/>
		<mx:Button label="filter" click="AppStates.gi().setSecondState(AppStates.FILTER)"  id="button2" styleName="btnTool"
			height="23" buttonMode="true" useHandCursor="true" mouseChildren="false"/>
		<mx:Button label="about" click="AppStates.gi().setSecondState(AppStates.ABOUT)" styleName="btnTool" 
			height="23" buttonMode="true" useHandCursor="true" mouseChildren="false"/>
		<mx:Button label="help" click="AppStates.gi().setSecondState(AppStates.HELP)" styleName="btnTool"
			height="23" buttonMode="true" useHandCursor="true" mouseChildren="false"/>
	</mx:HBox>
	
</mx:Canvas>
