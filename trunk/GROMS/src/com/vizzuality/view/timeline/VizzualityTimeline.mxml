<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:moveFlex="com.roguedevelopment.objecthandles.*" creationComplete="onCreationComplete()" xmlns:filters="flash.filters.*"
	width="966" height="125" xmlns:components="com.vizzuality.view.timeline.components.*">
	
	<mx:states>
		<mx:State name="Loading">
			<mx:AddChild position="lastChild">
				<mx:Canvas x="0" y="0" width="100%" height="100%" backgroundColor="black" backgroundAlpha="0.2" click="{this.currentState = ''}">
					<mx:Label text="Loading..." width="236" horizontalCenter="0" verticalCenter="0" textAlign="center" 
						color="#FFFFFF" fontWeight="bold" fontFamily="Arial" height="33" fontSize="20"/>
				</mx:Canvas>
			</mx:AddChild>
		</mx:State>
	</mx:states>
	
	<mx:Script>
		<![CDATA[
			import mx.events.ResizeEvent;
			import mx.collections.ArrayCollection;
			
			[Bindable]
			public var monthWidth: Number;
			public var statusBefore: String = "";
			
			[Bindable] private var timeline:ArrayCollection = new ArrayCollection( [
            {id: 0003, name: "Addax nocomalucatus",chart: [{ monthStart: 0, monthEnd: 4, style:"s11",status:"breeding"},
            													{ monthStart: 4, monthEnd: 8, style:"s12",status:"feeding,wintering"},
            													{ monthStart: 8, monthEnd: 10, style:"s13",status:"resident"},
            													{ monthStart: 10, monthEnd: 12, style:"s14",status:"all year round"}]},
            {id: 2346, name: "Addax nominalis",chart: [{ monthStart: 0, monthEnd: 6, style:"s21",status:"breeding"},
            											{ monthStart: 6, monthEnd: 8, style:"s00",status:"feeding,wintering"},
            											{ monthStart: 8, monthEnd: 9, style:"s23",status:"resident"},
            											{ monthStart: 9, monthEnd: 12, style:"s24",status:"all year round"}]},
            {id: 0040, name: "Addax nocomalucatus",chart: [{ monthStart: 0, monthEnd: 4, style:"s00",status:"breeding"},
            													{ monthStart: 4, monthEnd: 8, style:"s32",status:"feeding,wintering"},
            													{ monthStart: 8, monthEnd: 10, style:"s34",status:"resident"},
            													{ monthStart: 10, monthEnd: 12, style:"s32",status:"all year round"}]}
            ]);
			
			
			private function onCreationComplete():void {
				this.addEventListener(ResizeEvent.RESIZE,onResize);
				monthWidth = backgroundComponent.width/12;
 				timeChart.data = timeline;
				timelineLabels.data = timeline;
				
			}
			
			private function onResize(ev:Event):void {
				monthWidth = backgroundComponent.width/12;
				timeChart.data = timeline;
				timelineLabels.data = timeline;
			}
			
/* 
			private function onClickButton1():void {
				timeline = timeline3;
				b2.enabled = true;
				b1.enabled = false;
			}
			
			private function onClickButton2():void {
				timeline = timeline2;
				b1.enabled = true;
				b2.enabled = false;
			} 
*/
			
			private function changeState():void {
				if ((this.currentState == null) || (this.currentState == '')) {
					this.currentState = 'Loading';
				} else {
					this.currentState = '';
				}
				
			}
			
		]]>
	</mx:Script>
	
	<mx:Canvas width="100%" height="100%" borderStyle="solid" verticalScrollPolicy="off" horizontalScrollPolicy="off" horizontalCenter="0" backgroundColor="#ededed" verticalCenter="0">
		<mx:Canvas id="backgroundComponent" width="{this.width - 200}" height="100%" verticalScrollPolicy="off" horizontalScrollPolicy="off" verticalCenter="0" borderStyle="solid" borderThickness="0" right="0">								
			
			<components:TimelineChart  id="timeChart" y="23" monthWidth="{monthWidth}" right="0" left="0"/>
			
			<mx:Label text="JUA" y="6" x="{(monthWidth)*0}"  color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="FEB" y="6" x="{(monthWidth)*1}" horizontalCenter="{-(monthWidth)*5}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>	
			<mx:Label text="MAR" y="6" x="{(monthWidth)*2}" horizontalCenter="{-(monthWidth)*4}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>		
			<mx:Label text="APR" y="6" x="{(monthWidth)*3}" horizontalCenter="{-(monthWidth)*3}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="MAY" y="6" x="{(monthWidth)*4}" horizontalCenter="{-(monthWidth)*2}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>					
			<mx:Label text="JUN" y="6" x="{(monthWidth)*5}" horizontalCenter="{-(monthWidth)*1}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="JUL" y="6" x="{(monthWidth)*6}" horizontalCenter="0" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="AGO" y="6" x="{(monthWidth)*7}" horizontalCenter="{(monthWidth)}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="SEP" y="6" x="{(monthWidth)*8}" horizontalCenter="{(monthWidth)*2}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="OCT" y="6" x="{(monthWidth)*9}" horizontalCenter="{(monthWidth)*3}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="NOV" y="6" x="{(monthWidth)*10}" horizontalCenter="{(monthWidth)*4}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>			
			<mx:Label text="DEC" y="6" x="{(monthWidth)*11}" horizontalCenter="{(monthWidth)*5}" color="#7C7C7C" fontFamily="DINOT-Medium" fontSize="10"/>
				
			<moveFlex:ObjectHandles id="oh" allowRotate="false" allowVResize="false" x="0" y="{timeChart.y}" width="{monthWidth}" parentWidth="{backgroundComponent.width}" monthWidth="{monthWidth}" height="{backgroundComponent.height - oh.y}" 
				minWidth="{monthWidth}" allowVMove="false">
					<mx:Box id="box" width="100%" height="100%"  y="0" x="0" styleName="bkgBox" backgroundSize="100%">
					</mx:Box>
			</moveFlex:ObjectHandles>	
		</mx:Canvas>
		
		<components:TimelineLabelContainer id="timelineLabels" width="200" height="100%" labelProvider="{timeline}"/>
	
	</mx:Canvas>
	
</mx:Canvas>
