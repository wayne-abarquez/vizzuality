<?xml version="1.0" encoding="utf-8"?>

<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" 
        layout="absolute" width="900" height="700" 
        title="Flickr Application Authorization">
         

        <mx:Script source="AuthorizationViewClass.as" />

        <mx:states>
                <mx:State name="settingsErrorState">
                		<mx:RemoveChild target="{text2}"/>
                        <mx:AddChild position="lastChild">
                                <mx:Text y="70" 
                                        text="Flickr API Key and Flickr secret have not been set." 
                                        right="10" left="10" textAlign="center" color="#FF0202" height="78"/>
                        </mx:AddChild>
                        <mx:RemoveChild target="{authButton}"/>
                        <mx:AddChild position="lastChild">
                                <mx:Button label="Open Settings" bottom="10" left="10" click="onOpenSettingsClick()"/>
                        </mx:AddChild>
                </mx:State>
                <mx:State name="authorizationState">
                		<mx:RemoveChild target="{text2}"/>
                        <mx:RemoveChild target="{authButton}"/>
                        <mx:RemoveChild target="{button1}"/>
                        <mx:AddChild position="lastChild">
                                <mx:ProgressBar bottom="10" left="10" right="10" mode="manual" label="" labelPlacement="top" id="pBar" indeterminate="true"/>
                        </mx:AddChild>
                        <mx:SetProperty target="{text1}" name="text">
                                <mx:value>Please wait while the application authorizes with Flickr. This may take a few seconds.</mx:value>
                        </mx:SetProperty>
                </mx:State>
                <mx:State name="webBrowser">
                		<mx:RemoveChild target="{text1}"/>
                        <mx:RemoveChild target="{authButton}"/>
                        <mx:RemoveChild target="{text2}"/>
                        <mx:RemoveChild target="{button1}"/>
                        <mx:AddChild position="lastChild">
                                <mx:HTML id="web" creationComplete="onLaunchFlickrClick()" width="100%" height="100%"/>
                        </mx:AddChild>
                </mx:State>
                <mx:State name="urlAuthorizationState">
                		<mx:RemoveChild target="{text2}"/>
                        <mx:RemoveChild target="{authButton}"/>
                        <mx:AddChild position="lastChild">
                                <mx:Button label="Launch Flickr to Authorize" left="10" bottom="10" click="currentState='webBrowser'"/>
                        </mx:AddChild>
                        <mx:RemoveChild target="{text1}"/>
                        <mx:AddChild position="lastChild">
                                <mx:Text right="19" left="10" top="11" height="72"
                                                text="For the final step of authorization, you must click the Complete Authorization button below. This will launch the Flickr website in your browser, where you can complete the authorization.">
                                </mx:Text>
                        </mx:AddChild>
                        <mx:AddChild position="lastChild">
                                <mx:Text text="Once you have authorized the application on the Flickr website, return to the application to complete the process." left="10" top="91" right="10" height="76"/>
                        </mx:AddChild>
                </mx:State>
                <mx:State name="authorizationCompleteState">
                		<mx:RemoveChild target="{text2}"/>
                        <mx:RemoveChild target="{button1}"/>
                        <mx:RemoveChild target="{text1}"/>
                        <mx:RemoveChild target="{authButton}"/>
                        <mx:AddChild position="lastChild">
                                <mx:Button id="closeBut" label="Close" right="10" bottom="10" click="onCloseClick()"/>
                        </mx:AddChild>
                        <mx:AddChild position="lastChild">
                                <mx:Text text="Authorization Complete" right="10" left="10" top="10" textAlign="center" fontWeight="bold"/>
                        </mx:AddChild>
                        <mx:AddChild position="lastChild">
                                <mx:Text text="The application has successfully authenticated with Flickr." right="10" left="10" top="51" height="97"/>
                        </mx:AddChild>
                </mx:State>
                <mx:State name="errorState">
                        <mx:RemoveChild target="{text1}"/>
                        <mx:RemoveChild target="{text2}"/>
                        <mx:RemoveChild target="{authButton}"/>
                        <mx:AddChild position="lastChild">
                                <mx:Button label="Try Again" left="10" bottom="10" click="onTryAgainClick()"/>
                        </mx:AddChild>
                        <mx:AddChild position="lastChild">
                                <mx:Text text="Authorization Failed" right="10" left="10" top="10" textAlign="center" fontWeight="bold" color="#FD0303"/>
                        </mx:AddChild>
                        <mx:AddChild position="lastChild">
                                <mx:Text text="The authorization failed. Make sure that you are online, and click Try Again, to try to authorize the application again." 
                                        right="10" left="10" top="36" height="42"/>
                        </mx:AddChild>
                        <mx:AddChild position="lastChild">
                                <mx:Text left="10" top="86" id="errorField" text="" right="10" bottom="40"/>
                        </mx:AddChild>
                </mx:State>
        </mx:states>
        
        
        
        <mx:Text text="Wellcome to Vizzuality Image Tagger App." x="10" y="10" id="text2"/>
        <mx:Text text="Before the application can upload images to your account, you must first authorize it with Flickr."
                                                         right="10" left="10" top="36" height="52" id="text1"/>
        <mx:Button label="Begin Authorization Process" bottom="10" left="10" id="authButton" click="onAuthorizationStartClick()"/>
        <mx:Button label="Cancel" right="12" bottom="10" click="onCancelClick()" id="button1"/>

        
</mx:Panel>