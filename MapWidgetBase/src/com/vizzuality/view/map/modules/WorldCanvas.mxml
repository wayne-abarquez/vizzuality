<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="238" height="250" backgroundColor="#FFFFFF" backgroundAlpha="0.85" creationComplete="init()" 
	currentState="loading" xmlns:ns1="com.vizzuality.view.overlay.*" filters="{[glowGrey]}" xmlns:ns2="com.vizzuality.view.loader.*">
	<mx:states>
		<mx:State name="loading">
			<mx:AddChild position="lastChild">
				<mx:HRule strokeColor="#B4BB94" left="6" right="6" strokeWidth="3" top="0"/>
			</mx:AddChild>
			<mx:RemoveChild target="{canvas1}"/>
			<mx:RemoveChild target="{worldcoverage1}"/>
			<mx:RemoveChild target="{canvas0}"/>
			<mx:RemoveChild target="{label9}"/>
			<mx:RemoveChild target="{hrule1}"/>
			<mx:RemoveChild target="{label5}"/>
			<mx:RemoveChild target="{label2}"/>
			<mx:RemoveChild target="{hbox1}"/>
			<mx:RemoveChild target="{hrule2}"/>
			<mx:RemoveChild target="{label12}"/>
			<mx:RemoveChild target="{image1}"/>
			<mx:SetProperty name="height" value="60"/>
			<mx:AddChild position="lastChild">
				<ns2:GenericLoader left="0" right="0" top="0">
				</ns2:GenericLoader>
			</mx:AddChild>
		</mx:State>
	</mx:states>
<mx:Script>
	<![CDATA[
		import com.vizzuality.services.DataServiceEvent;
		import com.vizzuality.view.AppStates;
		import com.vizzuality.data.WorldStats;
		import mx.rpc.events.FaultEvent;
		import mx.rpc.events.ResultEvent;
		import mx.rpc.remoting.mxml.RemoteObject;
		import com.vizzuality.services.DataServices;
		
		private var ro:RemoteObject;
	
		private function init():void {
			
			DataServices.gi().addEventListener(DataServiceEvent.WORLD_DATA_LOADED,onDataLoaded);
			DataServices.gi().getWorldStats();
		}
		
		private function onDataLoaded(event:DataServiceEvent):void {			
			
			currentState='';
		}
		
	]]>
</mx:Script>

	<mx:GlowFilter id="glowGrey" blurX="5" blurY="5" alpha=".3" color="#000000" quality="2" />

	<mx:Canvas styleName="softGreenContainer" left="10" right="10" top="136" id="canvas0"
		verticalScrollPolicy="off" horizontalScrollPolicy="off" bottom="10">
		<mx:Label text="WORLD COVERED BY WDPA" id="label1" color="#484848" fontFamily="DINOT-Medium" fontSize="13" left="7" top="6"/>
		<ns1:WorldCoverage percent="{DataServices.gi().worldStats.coveragePercentage}" horizontalCenter="0" top="27" id="worldcoverage1"/>
	</mx:Canvas>
	<mx:Canvas height="102" styleName="greenContainer" left="10" right="10" top="35" id="canvas1"
		verticalScrollPolicy="off" horizontalScrollPolicy="off">
		<mx:Label text="TOTAL PROTECTED AREAS" id="label0" color="#484848" fontFamily="DINOT-Medium" fontSize="13" left="7" top="3"/>
		<mx:Label text="{DataServices.gi().worldStats.totalAreas}" id="label11" fontFamily="DINOT-Bold" fontSize="60" color="#484848" letterSpacing="-1" left="3" top="10"/>
	</mx:Canvas>
	<mx:Label text="WORLD STATS" id="label12" color="#375381" fontFamily="DINOT-Bold" fontSize="18" letterSpacing="-1" left="10" top="4"/>
	<mx:Canvas backgroundColor="#B4BB94" left="6" right="6" top="0" height="3"/>
	<mx:HRule strokeColor="#B4BB94" left="10" right="10" strokeWidth="1" top="34" id="hrule2"/>
	<mx:HRule strokeColor="#B4BB94" left="10" right="10" strokeWidth="1" top="136" id="hrule1"/>
	<mx:Image right="14" width="7" top="17" source="@Embed('/com/vizzuality/style/assets/collapseOverlayPanelArrow.png')" id="image1"/>
	<mx:HBox horizontalGap="0" left="17" top="112" id="hbox1">
		<mx:Label text="{Math.floor((DataServices.gi().worldStats.marine * 100) / DataServices.gi().worldStats.totalAreas) +'% MARINE'}" id="label5" fontSize="11" fontFamily="DINOT-Bold" color="#375381"/>
		<mx:Label text="|" id="label2" fontSize="11" fontFamily="DINOT-Bold" color="#4F4F4F" width="8" textAlign="center"/>
		<mx:Label text="{Math.floor((DataServices.gi().worldStats.terrestrial * 100) / DataServices.gi().worldStats.totalAreas) +'% TERRESTRIAL'}" id="label9" color="#FF5A00" fontSize="11" fontFamily="DINOT-Bold"/>
	</mx:HBox>
	
	
</mx:Canvas>
