<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%" 
	 creationComplete="init()"
	addedToStage="initSWFAddress()"
    removedFromStage="destroySWFAddress()"
    currentStateChange="setSWFAddress()"
	xmlns:ns1="org.vizzuality.view.pendingtasks.*">
	<mx:Script>
		<![CDATA[
			import com.asual.swfaddress.SWFAddress;
			import com.asual.swfaddress.SWFAddressEvent;
			
			public var path:String="rec/pendingtasks";
            public var depth:int=2;		
			
			private function init():void {
				currentState="Overview";
			}
		
			private function initSWFAddress():void {
                handleSWFAddress(new SWFAddressEvent(SWFAddressEvent.CHANGE));
                SWFAddress.addEventListener(SWFAddressEvent.CHANGE, handleSWFAddress);
            }
            
            private function destroySWFAddress():void {
                SWFAddress.removeEventListener(SWFAddressEvent.CHANGE, handleSWFAddress);
            }
            
            private function setSWFAddress():void {
                Helper.setSWFAddress(this, path, depth);
            }
            
            private function handleSWFAddress(event:SWFAddressEvent):void {
            	//trace(event.path);
                if (event.pathNames.length >= depth && event.pathNames[depth - 1] == "pendingtasks") {
                    Helper.handleSWFAddress(this, event, depth);
                }
            }
		]]>
	</mx:Script>
	<mx:states>
		<mx:State name="Overview">
			<mx:AddChild position="lastChild">
				<ns1:PendingTasks>
				</ns1:PendingTasks>
			</mx:AddChild>
		</mx:State>
		<mx:State name="Task">
			<mx:AddChild position="lastChild">
				<ns1:TaskOverview>
				</ns1:TaskOverview>
			</mx:AddChild>
		</mx:State>
		<mx:State name="Pa">
			<mx:AddChild position="lastChild">
				<ns1:AttributeReview>
				</ns1:AttributeReview>
			</mx:AddChild>
		</mx:State>
	</mx:states>
	
</mx:Canvas>
